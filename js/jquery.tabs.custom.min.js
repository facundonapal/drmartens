/**
 * Accessible Tabs - jQuery plugin for accessible, unobtrusive tabs
 * Build to seemlessly work with the CCS-Framework YAML (yaml.de) not depending on YAML though
 * @requires jQuery - tested with 1.9.1, 1.7 and 1.4.2 but might as well work with older versions
 *
 * english article: http://blog.ginader.de/archives/2009/02/07/jQuery-Accessible-Tabs-How-to-make-tabs-REALLY-accessible.php
 * german article: http://blog.ginader.de/archives/2009/02/07/jQuery-Accessible-Tabs-Wie-man-Tabs-WIRKLICH-zugaenglich-macht.php
 *
 * code: http://github.com/ginader/Accessible-Tabs
 * please report issues at: http://github.com/ginader/Accessible-Tabs/issues
 *
 * Copyright (c) 2016 Dirk Ginader (http://dir.kg)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
!function(s){var t=!1;function a(s,a){t&&window.console&&window.console.log&&(a?window.console.log(a+": ",s):window.console.log(s))}s.fn.extend({getUniqueId:function(s,t,a){return s+t+(a=void 0===a?"":"-"+a)},getClassSelectorsFromClassNames:function(s){return s.indexOf(!0)?"."+s.split(" ").join("."):"."+s},accessibleTabs:function(t){var e={37:-1,38:-1,39:1,40:1},i={top:"prepend",bottom:"append"};this.options=s.extend({wrapperClass:"content",currentClass:"current",tabhead:"h4",tabheadClass:"tabhead",tabbody:".tabbody",fx:"show",fxspeed:"normal",currentInfoText:"current tab: ",currentInfoPosition:"prepend",currentInfoClass:"current-info",tabsListClass:"tabs-list",syncheights:!1,syncHeightMethodName:"syncHeight",cssClassAvailable:!1,saveState:!1,autoAnchor:!1,pagination:!1,position:"top",wrapInnerNavLinks:"",firstNavItemClass:"first",lastNavItemClass:"last",clearfixClass:"clearfix"},t);var n=0;void 0!==s("body").data("accessibleTabsCount")&&(n=s("body").data("accessibleTabsCount")),s("body").data("accessibleTabsCount",this.length+n);var o=this;return this.each(function(t){var l=s(this),r="",c=0,d=[];s(l).wrapInner('<div class="'+o.options.wrapperClass+'"></div>'),s(l).find(o.options.tabhead).each(function(a){var e="",i=s(this).attr("id");if(i){if(0===i.indexOf("accessibletabscontent"))return;e=' id="'+i+'"'}var l=o.getUniqueId("accessibletabscontent",n+t,a),p=o.getUniqueId("accessibletabsnavigation",n+t,a);d.push(l);var h=s(this).children("a").length>0?s(this).children("a").html():s(this).html(),b="";if(s(this).attr("aria-label")&&(b='aria-label="'+s(this).attr("aria-label")+'"'),!0===o.options.cssClassAvailable){var f="";s(this).attr("class")&&(f=' class="'+(f=s(this).attr("class"))+'"'),r+='<li id="'+p+'"><a'+e+f+' href="#'+l+'" '+b+">"+h+"</a></li>"}else r+='<li id="'+p+'"><a'+e+' href="#'+l+'" '+b+">"+h+"</a></li>";s(this).attr({id:l,class:o.options.tabheadClass,tabindex:"-1"}),c++}),o.options.syncheights&&s.fn[o.options.syncHeightMethodName]&&(s(l).find(o.options.tabbody)[o.options.syncHeightMethodName](),s(window).resize(function(){s(l).find(o.options.tabbody)[o.options.syncHeightMethodName]()}));var p=o.getClassSelectorsFromClassNames(o.options.tabsListClass);s(l).find(p).length||s(l)[i[o.options.position]]('<ul class="'+o.options.clearfixClass+" "+o.options.tabsListClass+" tabamount"+c+'"></ul>'),s(l).find(p).append(r);var h=s(l).find(o.options.tabbody);h.length>0&&(s(h).hide(),s(h[0]).show()),s(l).find("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+">li:first").addClass(o.options.currentClass).addClass(o.options.firstNavItemClass).find("a")[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+"</span>").parents("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)).children("li:last").addClass(o.options.lastNavItemClass);var b=s(l).find(o.options.tabhead);if(b.length>0&&(s(b[0]).addClass(o.options.currentClass).addClass(o.options.firstNavItemClass),s(b[b.length-1]).addClass(o.options.lastNavItemClass)),o.options.wrapInnerNavLinks&&s(l).find("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+">li>a").wrapInner(o.options.wrapInnerNavLinks),s(l).find("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+">li>a").each(function(t){s(this).click(function(a){a.preventDefault(),l.trigger("showTab.accessibleTabs",[s(a.target)]),o.options.saveState&&s.cookie&&s.cookie("accessibletab_"+l.attr("id")+"_active",t),s(l).find("ul"+o.getClassSelectorsFromClassNames(o.options.tabsListClass)+">li."+o.options.currentClass).removeClass(o.options.currentClass).find("span"+o.getClassSelectorsFromClassNames(o.options.currentInfoClass)).remove(),s(l).find(o.options.tabhead).removeClass(o.options.currentClass),s(this).blur(),s(l).find(o.options.tabbody+":visible").hide(),s(l).find(o.options.tabbody).eq(t)[o.options.fx](o.options.fxspeed),s(this)[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+"</span>").parent().addClass(o.options.currentClass),s(s(this).attr("href")).addClass(o.options.currentClass),s(s(this).attr("href")).focus().keyup(function(a){e[a.keyCode]&&(o.showAccessibleTab(t+e[a.keyCode]),s(this).unbind("keyup"))})}),s(this).focus(function(){s(document).keyup(function(s){e[s.keyCode]&&o.showAccessibleTab(t+e[s.keyCode])})}),s(this).blur(function(){s(document).unbind("keyup")})}),o.options.saveState&&s.cookie){var f=s.cookie("accessibletab_"+l.attr("id")+"_active");a(s.cookie("accessibletab_"+l.attr("id")+"_active")),null!==f&&o.showAccessibleTab(f,l.attr("id"))}if(o.options.autoAnchor&&window.location.hash){var u=s(o.getClassSelectorsFromClassNames(o.options.tabsListClass)).find(window.location.hash);u.length&&u.click()}if(o.options.pagination){'    <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>','    <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li>',"</ul>";var C=s(l).find(".tabbody"),v=C.length;C.each(function(t){s(this).append('<ul class="pagination">    <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>    <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li></ul>');var a=t+1;a>=v&&(a=0);var e=t-1;e<0&&(e=v-1);var i=s(this).find(".pagination"),n=i.find(".previous");n.find("span").text(s("#"+d[e]).text()),n.find("a").attr("href","#"+d[e]).click(function(t){t.preventDefault(),s(l).find(".tabs-list a").eq(e).click()});var o=i.find(".next");o.find("span").text(s("#"+d[a]).text()),o.find("a").attr("href","#"+d[a]).click(function(t){t.preventDefault(),s(l).find(".tabs-list a").eq(a).click()})})}})},showAccessibleTab:function(t,e){a("showAccessibleTab");var i=this;if(!e)return this.each(function(){var a=s(this);a.trigger("showTab.accessibleTabs");var e=a.find("ul"+i.getClassSelectorsFromClassNames(i.options.tabsListClass)+">li>a");a.trigger("showTab.accessibleTabs",[e.eq(t)]),e.eq(t).click()});var n=s("#"+e),o=n.find("ul"+i.getClassSelectorsFromClassNames(i.options.tabsListClass)+">li>a");n.trigger("showTab.accessibleTabs",[o.eq(t)]),o.eq(t).click()},showAccessibleTabSelector:function(t){a("showAccessibleTabSelector");var e=s(t);e&&("a"===e.get(0).nodeName.toLowerCase()?e.click():a("the selector of a showAccessibleTabSelector() call needs to point to a tabs headline!"))}})}(jQuery);